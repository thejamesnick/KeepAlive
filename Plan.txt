# KeepAlive Build Plan

## Technology Stack
- **Framework**: Next.js (App Router) - Handles both the UI and the API endpoint.
- **Language**: TypeScript
- **Package Manager**: Yarn
- **Styling**: Tailwind CSS (Strict "Black & White" minimalist theme, Squrcle cards, and proper model like Apple yh?)
- **Database**: Supabase (Postgres)
- **Auth**: Supabase Auth (GitHub or Email, Google)

---

## ðŸ“… Current Status (Dec 2025)
- **Frontend**: âœ… Complete (Landing, Dashboard, Wizard, Profile UI).
- **Design**: âœ… Complete (Minimalist, Apple-style).
- **Backend (DB)**: âœ… Complete (Schema defined, RLS set).
- **Auth UI**: âœ… Complete (Login Page, Redirects).
- **Next Step**: ðŸš§ **API Endpoint Implementation**.

---

## 1. Database Schema (Supabase) âœ…
### Table: `profiles`
- Handles User data, billing tier, Stripe ID.
- Linked one-to-one with Auth Users.

### Table: `projects`
- `settings` (jsonb): Future-proof column for Slack/Discord webhooks.
- `api_token` (text): **Currently Plain Text** for better UX (View/Copy).
  - *Note: Migration plan to Hashed Tokens (bcrypt) exists for Post-MVP security hardening.*

### Table: `pings`
- History of all health checks.

---

## 2. API Endpoint (The Receiver) ðŸš§ (Next Priority)
path: `/app/api/ping`

**Logic:**
1. Receive POST request with `{ "project_id": "...", "status": "ok" }`.
2. Verify `Authorization` header matches the project's token in DB.
3. **If Valid**:
   - Insert row into `pings` table.
   - Update `last_ping_at` on `projects` table.
   - Return `{ success: true }`.
4. **If Invalid**: Return 401 Unauthorized.

---

## 3. Frontend Pages (Dashboard) âœ…

### A. Landing / Login âœ…
- Landing Page: "Get Started" -> `/login`.
- Login Page: "Continue with GitHub / Google" (Supabase Auth).
  - *Note: "Link identities on email" must be enabled in Supabase.*

### B. Main Dashboard (`/dashboard`) âœ…
- **Header**: "KeepAlive" logo (text only).
- **List of Projects**:
  - Grid Layout with Squircle Cards.
  - **Loading State**: Pulse Skeleton (Black & White).
  - Status Indicators (Pulse Dot).
  - Copy/View Credentials functionality (Persistence fixed).

### C. "New Project" Flow (Wizard) âœ…
- **Step 1**: Create (Name Input).
- **Step 2**: Secrets (Credentials Display).
  - `KEEPALIVE_PROJECT_ID` (Generated: `kp_...`)
  - `KEEPALIVE_TOKEN` (Generated: `keep_live_...`)
- **Step 3**: Workflow (YAML Generation).
  - Dynamic Cron Schedule (Randomized minute 0-59).

### D. Settings / Profile âœ…
- Profile Dropdown (User/Signout).
- Settings Modal (Placeholder for future account management).

---

## 4. Visual Design Rules âœ…
- Background: `#ffffff` (White)
- Text: `#000000` (Black)
- **Components**: Apple-style "Squircle" cards (smooth corners).
- **Typography**: Inter (UI) + Geist Mono (Code).
